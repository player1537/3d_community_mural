<!DOCTYPE html>
    <head>
	<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
	<meta name="mobile-web-app-capable" content="yes">
        <title>Tapestry</title>
        <link rel="stylesheet" href="/static/css/style.css">
        <style>.hyperimage { touch-action: none; }</style>
	<style>body { background-color: #999; }</style>

        <!-- jQuery dependency -->
        <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>

        <!-- For testing -->
        <script src="/static/js/smooth.js"></script>
        <script src="/static/js/gremlins.min.js"></script>
        <script src="/static/js/testing.js"></script>

        <!-- Core Tapestry JS -->
        <script src="/static/js/tools.js"></script>
        <script src="/static/js/sylvester.js"></script>
        <script src="/static/js/math.js"></script>
        <script src="/static/js/arcball.js"></script>
        <script src="/static/js/tapestry.js"></script>

        <!-- For minified version -->
        <!-- <script src="js/tapestry.min.js></script> -->
        <script>
            $(document).ready(function(){
				function getParameterByName(name, url) {
					if (!url) url = window.location.href;
					name = name.replace(/[\[\]]/g, "\\$&");
					var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
						results = regex.exec(url);
					if (!results) return null;
					if (!results[2]) return '';
					return decodeURIComponent(results[2].replace(/\+/g, " "));
				}

                $(".hyperimage").attr("data-dataset", 'scene,obj1,Angel,0.0,0.0,-0.5,1.0,1.0,2.0,0,0,120,Emerald,obj2,Deer,0.5,0.0,-0.5,1.0,1.0,2.0,0,0,0,Emerald,obj3,Debris,0.0,0.5,-0.5,1.0,1.0,2.0,0,0,0,Brass,posy,0.8,0.8,0.8,negx,0.8,0.2,0.2,posz,0.2,0.2,0.8,negy,0.2,0.8,0.8,negz,0.8,0.2,0.8,posx,0.2,0.8,0.2,light,0.0,0.9,0.5,0.9,0.1,0.1,10,0.1,light,0.5,0.9,0.5,0.1,0.9,0.1,10,0.1');
		var n_tiles = 1,
		    image_size = 9,
		    n_tiles_real = Math.pow(n_tiles, 2),
		    size_real = Math.pow(2, image_size);
		document.getElementById('heading').innerText = n_tiles_real + ' tiles - ' + size_real + ' size';
                $(".hyperimage").tapestry({
                    n_tiles: n_tiles_real,
                    low_res: 256, //Math.max(n_tiles_real, 128),
                    width: size_real,
                    height: size_real,
		    zoom: 3,
                });
            });
        </script>
    </head>
    <body>
        <h1 id="heading"></h1>
        <div class="hyperimage" id="dataset"></div>
    </body>
</html>
